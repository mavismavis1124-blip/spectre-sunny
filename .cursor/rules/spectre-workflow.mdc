---
description: Workflow and guidelines for Spectre Vibe – analyze, plan, implement, verify. Simplicity, surgical changes, tests and docs.
globs: 
alwaysApply: true
---

# Spectre Vibe – Workflow & Guidelines

Apply these when working on this app. Adapted from trading-terminal best practices; focused on this frontend (React/Vite, Codex API, watchlist, Command Center, Top Coins).

---

## Workflow

1. **Analyze** – Understand the task, find affected files, follow existing patterns.
2. **Plan** (for non-trivial work) – Write a short step-by-step plan; optionally save under `.cursor/plans/<feature>.md`; get user approval before big changes.
3. **Implement** – Change only what’s needed; match existing style and structure.
4. **Verify** – Run the app/tests if relevant; confirm the goal is met.

---

## Behavior

- **Think first** – State assumptions; if unclear, ask. If there are two valid approaches, say so.
- **Simplicity** – Minimum code that solves the problem. No speculative features or over-abstraction.
- **Surgical changes** – Don’t refactor or “improve” unrelated code. Remove only what your changes make unused.
- **Goal-driven** – Define what “done” looks like (e.g. “button does X”, “test passes”) and check it.

---

## This Codebase

- **Stack**: React 18, Vite, JSX. CSS (including `.day-mode.css`). Codex API, watchlist, Header, WelcomePage, LeftPanel, WatchlistsPage.
- **Structure**: `src/components/`, `src/hooks/`, `src/services/`, `src/constants/`. Shared watchlist styles in `WatchlistShared.css`.
- **Patterns**: `dayMode` prop for light theme; `marketMode` (crypto/stocks); `addToWatchlist` / `removeFromWatchlist`; existing naming and file layout – match them.

---

## Naming & Style

- **Components**: PascalCase (`WelcomePage.jsx`).
- **Hooks**: `use` prefix, camelCase (`useCodexData.js`).
- **CSS**: kebab-case classes; BEM-like where used (e.g. `.welcome-widget-us-market`).
- **Files**: Match existing (e.g. `ComponentName.css`, `ComponentName.day-mode.css`).

---

## Quality Bar

- **Tests**: Add tests for new logic/hooks where practical; don’t block small UI tweaks.
- **Docs**: Update README or `docs/` when adding env vars, APIs, or notable behavior.
- **Security**: No hardcoded secrets; validate/sanitize user input if you add forms or external data.

---

## When to Plan First

- New pages or major features.
- Changes to routing, auth, or shared state.
- New API integrations or data shape changes.
- Anything that touches watchlist persistence or user data.

**Implement directly**: Bug fixes with clear scope, UI/style tweaks, copy changes, small refactors in one area.

---

## Bash / Terminal

- Prefer command flags over piping (e.g. `git log -n 10` instead of `git log | head`).
- Let commands finish; don’t pipe through `head`/`tail`/`less`/`more` for programmatic use.
